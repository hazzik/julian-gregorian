"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.Calendar = void 0;
class Calendar {
    daysInMonth(year, month) {
        if (month === 2) {
            return this.isLeapYear(year) ? 29 : 28;
        }
        return [31, null, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31][month - 1];
    }
    addDays(date, days) {
        let newDay = date.day + days;
        let newMonth = date.month;
        let newYear = date.year;
        if (newDay <= 0) {
            newMonth -= 1;
            if (newMonth <= 0) {
                newMonth = 12;
                newYear -= 1;
            }
            newDay = newDay + this.daysInMonth(newYear, newMonth);
        }
        else {
            const daysInMonth = this.daysInMonth(newYear, newMonth);
            if (newDay > daysInMonth) {
                newDay = newDay - daysInMonth;
                newMonth += 1;
                if (newMonth > 12) {
                    newMonth = 1;
                    newYear += 1;
                }
            }
        }
        return { year: newYear, month: newMonth, day: newDay };
    }
}
exports.Calendar = Calendar;
Calendar.Julian = new class extends Calendar {
    isLeapYear(year) {
        return year % 4 === 0;
    }
};
Calendar.Gregorian = new class extends Calendar {
    isLeapYear(year) {
        return year % 4 === 0 && year % 100 !== 0 || year % 400 === 0;
    }
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2FsZW5kYXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvY2FsZW5kYXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBRUEsTUFBc0IsUUFBUTtJQWVuQixXQUFXLENBQUMsSUFBWSxFQUFFLEtBQWE7UUFDMUMsSUFBSSxLQUFLLEtBQUssQ0FBQyxFQUFFO1lBQ2IsT0FBTyxJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztTQUMxQztRQUVELE9BQU8sQ0FBQyxFQUFFLEVBQUUsSUFBSSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsQ0FBQztJQUN6RSxDQUFDO0lBRU0sT0FBTyxDQUFDLElBQW1CLEVBQUUsSUFBWTtRQUM1QyxJQUFJLE1BQU0sR0FBRyxJQUFJLENBQUMsR0FBRyxHQUFHLElBQUksQ0FBQztRQUM3QixJQUFJLFFBQVEsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDO1FBQzFCLElBQUksT0FBTyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUM7UUFFeEIsSUFBSSxNQUFNLElBQUksQ0FBQyxFQUFFO1lBQ2IsUUFBUSxJQUFJLENBQUMsQ0FBQztZQUNkLElBQUksUUFBUSxJQUFJLENBQUMsRUFBRTtnQkFDZixRQUFRLEdBQUcsRUFBRSxDQUFDO2dCQUNkLE9BQU8sSUFBSSxDQUFDLENBQUM7YUFDaEI7WUFDRCxNQUFNLEdBQUcsTUFBTSxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsT0FBTyxFQUFFLFFBQVEsQ0FBQyxDQUFDO1NBQ3pEO2FBQU07WUFDSCxNQUFNLFdBQVcsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLE9BQU8sRUFBRSxRQUFRLENBQUMsQ0FBQztZQUN4RCxJQUFJLE1BQU0sR0FBRyxXQUFXLEVBQUU7Z0JBQ3RCLE1BQU0sR0FBRyxNQUFNLEdBQUcsV0FBVyxDQUFDO2dCQUM5QixRQUFRLElBQUksQ0FBQyxDQUFDO2dCQUNkLElBQUksUUFBUSxHQUFHLEVBQUUsRUFBRTtvQkFDZixRQUFRLEdBQUcsQ0FBQyxDQUFDO29CQUNiLE9BQU8sSUFBSSxDQUFDLENBQUM7aUJBQ2hCO2FBQ0o7U0FDSjtRQUVELE9BQU8sRUFBQyxJQUFJLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBRSxRQUFRLEVBQUUsR0FBRyxFQUFFLE1BQU0sRUFBQyxDQUFDO0lBQ3pELENBQUM7O0FBaERMLDRCQWlEQztBQWhEaUIsZUFBTSxHQUFHLElBQUksS0FBTSxTQUFRLFFBQVE7SUFDdEMsVUFBVSxDQUFDLElBQVk7UUFDMUIsT0FBTyxJQUFJLEdBQUcsQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUMxQixDQUFDO0NBQ0osQ0FBQztBQUVZLGtCQUFTLEdBQUcsSUFBSSxLQUFNLFNBQVEsUUFBUTtJQUN6QyxVQUFVLENBQUMsSUFBWTtRQUMxQixPQUFPLElBQUksR0FBRyxDQUFDLEtBQUssQ0FBQyxJQUFJLElBQUksR0FBRyxHQUFHLEtBQUssQ0FBQyxJQUFJLElBQUksR0FBRyxHQUFHLEtBQUssQ0FBQyxDQUFDO0lBQ2xFLENBQUM7Q0FDSixDQUFDIn0=